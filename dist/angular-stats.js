!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof exports?exports.AngularStats=t(require("angular")):e.AngularStats=t(e.angular)}(this,function(e){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function AngularStats(e,t,n,o){_classCallCheck(this,AngularStats),this.digestInfo={duration:"0"},this.rootScope=e,this.document=t,this.window=n,this.timeout=o,this.startingElement=this.document[0].querySelector("app")}return o(AngularStats,[{key:"setStartingElement",value:function(e){this.startingElement=e}},{key:"analyzeWebApp",value:function(){this.scopesList=[],this.watchersList=[],this.componentsInfo={},this.domElementsCount=0,this.nodeNameList={};var e=this.document.find(this.startingElement);if(!e||0===e.length)throw Error(this.startingElement+" is not a valid selector");return this.analizeScope(this.rootScope),this.detectFromElement(e),this.calculateDigestDuration(),this.composeMessage()}},{key:"composeMessage",value:function(){var e="GENERAL\n";e+="----------------------\n",e+="Tot scopes: "+this.scopesList.length+"\n",e+="Tot watchers: "+this.watchersList.length+"\n",e+="Tot DOM Elements: "+this.domElementsCount+"\n",e+="Digest duration: "+this.digestInfo.duration+" ms \n\n",e+="\nCOMPONENTS\n",e+="----------------------\n";for(var t in this.componentsInfo)e+="- "+t.toUpperCase()+"\ns: "+this.componentsInfo[t].scopesCount+", w: "+this.componentsInfo[t].watchers.length+"\n";e+="\n\nHTMLElement\n",e+="----------------------\n";for(var n in this.nodeNameList)e+=n+": "+this.nodeNameList[n]+"\n";return e}},{key:"analizeScope",value:function(e){var t=this;if(-1===this.scopesList.indexOf(e)){this.scopesList.push(e);var n=e.$ctrl?e.$ctrl.name:e.name?e.name:"Unknown";void 0===this.componentsInfo[n]?this.componentsInfo[n]={name:n,scopesCount:1,watchers:[]}:this.componentsInfo[n].scopesCount++,r.forEach(e.$$watchers,function(e){-1===t.watchersList.indexOf(e)&&t.watchersList.push(e),-1===t.componentsInfo[n].watchers.indexOf(e)&&t.componentsInfo[n].watchers.push(e)}),e.$$childHead&&this.analizeScope(e.$$childHead),e.$$childTail&&this.analizeScope(e.$$childTail),e.$$prevSibling&&this.analizeScope(e.$$prevSibling),e.$$nextSibling&&this.analizeScope(e.$$nextSibling)}}},{key:"detectFromElement",value:function(e){var t=this;this.domElementsCount++,e.data().hasOwnProperty("$scope")&&this.analizeScope(e.data().$scope),r.forEach(e.children(),function(e){void 0===t.nodeNameList[e.nodeName]?t.nodeNameList[e.nodeName]=1:t.nodeNameList[e.nodeName]++,t.detectFromElement(t.document.find(e))})}},{key:"calculateDigestDuration",value:function(){var e=this,t=0,n=Object.getPrototypeOf(this.rootScope),o=n.$digest;n.$digest=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=e.getTime();o.apply(e.rootScope,r),t=e.getTime()-a,e.digestInfo.duration=t.toFixed(2)}}},{key:"getTime",value:function(){return performance?performance.now():this.getDate().getTime()}},{key:"getDate",value:function(){return new Date}}]),AngularStats}();i.$inject=["$rootScope","$document","$window","$timeout"],t.AngularStats=i},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(0);t.angularStats=o.module("angular-stats",[]).service("AngularStats",r.AngularStats).name},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);t.angularStats=o.angularStats;var r=n(0);t.AngularStats=r.AngularStats}])});
//# sourceMappingURL=angular-stats.js.map