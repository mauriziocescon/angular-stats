{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d6b280582bd5efe6730d","webpack:///./src/angular-stats.service.ts","webpack:///external \"angular\"","webpack:///./src/angular-stats.module.ts","webpack:///./index.ts"],"names":[],"mappings":"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","file":"angular-stats.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"angular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"angular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AngularStats\"] = factory(require(\"angular\"));\n\telse\n\t\troot[\"AngularStats\"] = factory(root[\"angular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6b280582bd5efe6730d","import * as angular from \"angular\";\n\nexport class AngularStats {\n    public static $inject = [\"$rootScope\", \"$document\", \"$window\", \"$timeout\"];\n\n    private rootScope: ng.IRootScopeService;\n    private document: ng.IDocumentService;\n    private window: ng.IWindowService;\n    private timeout: ng.ITimeoutService;\n\n    private scopesList: any[];\n    private watchersList: any[];\n    private componentsInfo: Object;\n\n    private domElementsCount: number;\n    private nodeNameList: Object;\n\n    private startingElement: any;\n    private digestInfo = {duration: \"0\"};\n\n    constructor($rootScope: ng.IRootScopeService,\n                $document: ng.IDocumentService,\n                $window: ng.IWindowService,\n                $timeout: ng.ITimeoutService) {\n        this.rootScope = $rootScope;\n        this.document = $document;\n        this.window = $window;\n        this.timeout = $timeout;\n\n        this.startingElement = this.document[0].querySelector(\"app\");\n    }\n\n    public setStartingElement(element: any): void {\n        this.startingElement = element;\n    }\n\n    public analyzeWebApp(): string {\n        this.scopesList = [];\n        this.watchersList = [];\n        this.componentsInfo = {};\n\n        this.domElementsCount = 0;\n        this.nodeNameList = {};\n\n        let element = this.document.find(this.startingElement);\n        if (!element || element.length === 0) {\n            throw Error(this.startingElement + \" is not a valid selector\");\n        }\n        else {\n            this.analizeScope(this.rootScope);\n            this.detectFromElement(element);\n            this.calculateDigestDuration();\n        }\n\n        return this.composeMessage();\n    }\n\n    private composeMessage(): string {\n\n        let mex = \"GENERAL\\n\";\n        mex += \"----------------------\\n\";\n        mex += \"Tot scopes: \" + this.scopesList.length + \"\\n\";\n        mex += \"Tot watchers: \" + this.watchersList.length + \"\\n\";\n        mex += \"Tot DOM Elements: \" + this.domElementsCount + \"\\n\";\n        mex += \"Digest duration: \" + this.digestInfo.duration + \" ms \\n\\n\";\n\n        mex += \"\\nCOMPONENTS\\n\";\n        mex += \"----------------------\\n\";\n        for (let name in this.componentsInfo) {\n            mex += \"- \" + name.toUpperCase() + \"\\n\" + \"s: \" + this.componentsInfo[name].scopesCount + \", w: \" + this.componentsInfo[name].watchers.length + \"\\n\";\n        }\n\n        mex += \"\\n\\nHTMLElement\\n\";\n        mex += \"----------------------\\n\";\n        for (let nodeName in this.nodeNameList) {\n            mex += nodeName + \": \" + this.nodeNameList[nodeName] + \"\\n\";\n        }\n\n        return mex;\n    }\n\n    private analizeScope(currentScope: ng.IScope): void {\n\n        if (this.scopesList.indexOf(currentScope) === -1) {\n            this.scopesList.push(currentScope);\n\n            const name = currentScope[\"$ctrl\"] ? currentScope[\"$ctrl\"][\"name\"] : (currentScope[\"name\"] ? currentScope[\"name\"] : \"Unknown\");\n            if (this.componentsInfo[name] === undefined) {\n                this.componentsInfo[name] = {\n                    name: name, scopesCount: 1, watchers: [],\n                };\n            } else {\n                this.componentsInfo[name].scopesCount++;\n            }\n\n            angular.forEach(currentScope[\"$$watchers\"], (watcher) => {\n                if (this.watchersList.indexOf(watcher) === -1) this.watchersList.push(watcher);\n\n                if (this.componentsInfo[name].watchers.indexOf(watcher) === -1) this.componentsInfo[name].watchers.push(watcher);\n            });\n\n            if (currentScope[\"$$childHead\"]) {\n                this.analizeScope(currentScope[\"$$childHead\"]);\n            }\n\n            if (currentScope[\"$$childTail\"]) {\n                this.analizeScope(currentScope[\"$$childTail\"]);\n            }\n\n            if (currentScope[\"$$prevSibling\"]) {\n                this.analizeScope(currentScope[\"$$prevSibling\"]);\n            }\n\n            if (currentScope[\"$$nextSibling\"]) {\n                this.analizeScope(currentScope[\"$$nextSibling\"]);\n            }\n        }\n    }\n\n    private detectFromElement(element: any): void {\n\n        this.domElementsCount++;\n        if (element.data().hasOwnProperty(\"$scope\")) this.analizeScope(element.data()[\"$scope\"]);\n\n        angular.forEach(element.children(), (childElement: HTMLElement) => {\n            if (this.nodeNameList[childElement.nodeName] === undefined) {\n                this.nodeNameList[childElement.nodeName] = 1;\n            } else {\n                this.nodeNameList[childElement.nodeName]++;\n            }\n            this.detectFromElement(this.document.find(childElement));\n        });\n    }\n\n    private calculateDigestDuration(): void {\n        let duration = 0;\n        let scopePrototype = Object.getPrototypeOf(this.rootScope);\n        let angularDigest = scopePrototype.$digest;\n\n        scopePrototype.$digest = (...args) => {\n            let start = this.getTime();\n            angularDigest.apply(this.rootScope, args);\n            duration = this.getTime() - start;\n            this.digestInfo.duration = duration.toFixed(2);\n        };\n    };\n\n    private getTime(): number {\n        return performance ? performance.now() : this.getDate().getTime();\n    }\n\n    private getDate(): Date {\n        return new Date();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--4-0!./src/angular-stats.service.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"angular\"\n// module id = 1\n// module chunks = 0","import * as angular from \"angular\";\nimport { AngularStats } from \"./angular-stats.service\";\n\nexport const angularStats = angular.module(\"angular-stats\", [])\n    .service(\"AngularStats\", AngularStats)\n    .name;\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--4-0!./src/angular-stats.module.ts","export {angularStats} from \"./src/angular-stats.module\";\nexport {AngularStats} from \"./src/angular-stats.service\";\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--4-0!./index.ts"],"sourceRoot":""}